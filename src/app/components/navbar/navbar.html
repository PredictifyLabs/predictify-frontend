<nav class="navbar">
  <div class="navbar-content">
    <!-- Logo Section -->
    <a class="navbar-logo" (click)="navigate('events')">
      <img src="assets/images/Logo.png" alt="Predictify Logo" class="logo-icon">
      <div class="logo-text-container">
        <span class="logo-title">Predictify</span>
        <span class="logo-subtitle">AI-POWERED ATTENDANCE FORECASTING!</span>
      </div>
    </a>

    <!-- Right Section -->
    <div class="navbar-right">
      <!-- Language Toggle -->
      <button class="lang-toggle" (click)="toggleLanguage()" title="Change Language">
        <span class="lang-flag">{{ isEnglish() ? 'ðŸ‡ºðŸ‡¸' : 'ðŸ‡ªðŸ‡¸' }}</span>
        <span class="lang-code">{{ currentLang().toUpperCase() }}</span>
      </button>

      <!-- Time Display -->
      <div class="time-display">
        <span nz-icon nzType="clock-circle" nzTheme="outline"></span>
        <span class="time">{{ currentTime() }}</span>
        <span class="timezone">{{ timezone() }}</span>
      </div>

      <!-- Auth Buttons -->
      @if (isAuthenticated()) {
        <!-- User Menu when authenticated -->
        <button class="btn-user" nz-dropdown [nzDropdownMenu]="userMenu" nzTrigger="click">
          @if (userAvatar()) {
            <nz-avatar [nzSrc]="userAvatar()" nzSize="small"></nz-avatar>
          } @else {
            <nz-avatar nzIcon="user" nzSize="small"></nz-avatar>
          }
          <span class="user-name">{{ userName() }}</span>
          <span nz-icon nzType="down" nzTheme="outline"></span>
        </button>
        <nz-dropdown-menu #userMenu="nzDropdownMenu">
          <ul nz-menu class="user-dropdown">
            <li nz-menu-item disabled class="user-role-item">
              <span class="role-badge">{{ userRole() }}</span>
            </li>
            <li nz-menu-divider></li>
            <li nz-menu-item (click)="navigate('profile')">
              <span nz-icon nzType="user" nzTheme="outline"></span>
              {{ t('nav.profile') }}
            </li>
            <li nz-menu-item (click)="navigate('my-events')">
              <span nz-icon nzType="calendar" nzTheme="outline"></span>
              {{ t('nav.myEvents') }}
            </li>
            <li nz-menu-item (click)="navigate('discover')">
              <span nz-icon nzType="compass" nzTheme="outline"></span>
              {{ t('nav.discover') }}
            </li>
            @if (isAdmin()) {
              <li nz-menu-item (click)="navigate('organizer')">
                <span nz-icon nzType="appstore" nzTheme="outline"></span>
                {{ t('nav.organizer') }}
              </li>
            }
            @if (userRole() === 'ADMIN') {
              <li nz-menu-item (click)="navigate('dashboard')">
                <span nz-icon nzType="dashboard" nzTheme="outline"></span>
                {{ t('nav.dashboard') }}
              </li>
              <li nz-menu-item (click)="navigate('admin')">
                <span nz-icon nzType="setting" nzTheme="outline"></span>
                {{ t('nav.admin') }}
              </li>
            }
            <li nz-menu-divider></li>
            <li nz-menu-item nzDanger (click)="logout()">
              <span nz-icon nzType="logout" nzTheme="outline"></span>
              {{ t('nav.logout') }}
            </li>
          </ul>
        </nz-dropdown-menu>
      } @else {
        <!-- Auth buttons when not authenticated -->
        <button class="btn-login" (click)="goToLogin()">{{ t('nav.login') }}</button>
        <button class="btn-register" (click)="goToRegister()">{{ t('nav.register') }}</button>
      }
    </div>
  </div>
</nav>